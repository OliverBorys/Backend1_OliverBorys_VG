<h2 class="admin-title">Category Management</h2>

<section class="admin-products-table">
  <div class="toolbar">
    <div class="spacer"></div>
    <button class="add-btn" (click)="openAddModal()">+ Add Category</button>
  </div>

  <div *ngIf="loading" class="loading">Loading…</div>
  <div *ngIf="!loading && categories.length === 0" class="no-products">No categories found.</div>

  <table class="product-table" *ngIf="!loading && categories.length > 0">
    <thead>
      <tr>
        <th class="small">ID</th>
        <th class="medium">Image</th>
        <th>Category</th>
        <th class="small">Products</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let c of categories">
        <td class="small">{{ c.id }}</td>

        <td class="medium">
          <ng-container *ngIf="c.imageUrl; else noimg">
            <img [src]="c.imageUrl" alt="{{ c.categoryName }}" class="product-thumbnail" />
          </ng-container>
          <ng-template #noimg>
            <span class="muted">—</span>
          </ng-template>
        </td>

        <td class="product-cell">
          <span>{{ c.categoryName }}</span>
        </td>

        <td class="small">{{ c.productCount }}</td>

        <td class="actions">
          <button class="edit-btn" (click)="openEditModal(c)">Edit</button>
          <button class="delete-btn" (click)="openDeleteModal(c)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</section>

<app-category-form
  *ngIf="showForm"
  [open]="showForm"
  [category]="selectedCategory"
  (save)="handleSave($event)"
  (close)="closeForm()"
></app-category-form>

<app-confirm-delete-modal
  *ngIf="showDeleteModal"
  [itemName]="categoryToDelete?.categoryName || ''"
  (confirm)="confirmDelete()"
  (close)="closeDeleteModal()"
></app-confirm-delete-modal>
